---
title: varä½œç”¨åŸŸè¯¦è§£
date: 2025-11-20
category: JavaScript
difficulty: åŸºç¡€
tags: [var, ä½œç”¨åŸŸ, å‡½æ•°ä½œç”¨åŸŸ, å˜é‡æå‡]
related: [var-let-const.md, closure.md]
hasCode: false
---

# é¢˜ç›®

è¯·è¯¦ç»†è¯´æ˜varçš„ä½œç”¨åŸŸç‰¹æ€§ï¼Œä»¥åŠä¸ºä»€ä¹ˆåœ¨å¾ªç¯ä¸­ä½¿ç”¨varä¼šå‡ºç°é—®é¢˜ã€‚

## ğŸ“ æ ‡å‡†ç­”æ¡ˆ

### æ ¸å¿ƒè¦ç‚¹

1. **å‡½æ•°ä½œç”¨åŸŸ**ï¼švarå£°æ˜çš„å˜é‡ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå‡½æ•°
2. **å˜é‡æå‡**ï¼švarå£°æ˜ä¼šè¢«æå‡åˆ°å‡½æ•°é¡¶éƒ¨
3. **å…¨å±€å¯¹è±¡å±æ€§**ï¼šå…¨å±€varå˜é‡ä¼šæˆä¸ºwindowå±æ€§
4. **å¾ªç¯é—®é¢˜**ï¼šå¾ªç¯ä¸­çš„varä¼šå…±äº«åŒä¸€ä¸ªå˜é‡

### è¯¦ç»†è¯´æ˜

#### å‡½æ•°ä½œç”¨åŸŸ

```javascript
function fn() {
  if (true) {
    var a = 1;
  }
  console.log(a); // 1ï¼Œå¯ä»¥è®¿é—®
}

// ç­‰ä»·äº
function fn() {
  var a; // æå‡åˆ°å‡½æ•°é¡¶éƒ¨
  if (true) {
    a = 1;
  }
  console.log(a);
}
```

#### å¾ªç¯ä¸­çš„ç»å…¸é—®é¢˜

```javascript
// é—®é¢˜ä»£ç 
for (var i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log(i);
  }, 0);
}
// è¾“å‡º: 3 3 3

// åŸå› ï¼švar iæ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Œæ‰€æœ‰å›è°ƒå…±äº«åŒä¸€ä¸ªi
// å½“å›è°ƒæ‰§è¡Œæ—¶ï¼Œå¾ªç¯å·²ç»“æŸï¼Œi=3

// è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨let
for (let i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log(i);
  }, 0);
}
// è¾“å‡º: 0 1 2

// è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨é—­åŒ…
for (var i = 0; i < 3; i++) {
  (function(j) {
    setTimeout(() => {
      console.log(j);
    }, 0);
  })(i);
}
// è¾“å‡º: 0 1 2

// è§£å†³æ–¹æ¡ˆ3ï¼šä½¿ç”¨bind
for (var i = 0; i < 3; i++) {
  setTimeout(console.log.bind(null, i), 0);
}
// è¾“å‡º: 0 1 2
```

## ğŸ§  æ·±åº¦ç†è§£

### å˜é‡æå‡æœºåˆ¶

```javascript
console.log(a); // undefinedï¼Œä¸æ˜¯ReferenceError
var a = 1;

// ç­‰ä»·äº
var a;
console.log(a);
a = 1;
```

### å…¨å±€å¯¹è±¡å±æ€§

```javascript
var a = 1;
console.log(window.a); // 1

let b = 2;
console.log(window.b); // undefined
```

## ğŸ’¡ é¢è¯•å›ç­”æŠ€å·§

### æ¨èå›ç­”é¡ºåº

1. **è¯´æ˜å‡½æ•°ä½œç”¨åŸŸ**ï¼švarçš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå‡½æ•°
2. **ä¸¾å¾ªç¯ä¾‹å­**ï¼šè¯´æ˜ä¸ºä»€ä¹ˆè¾“å‡º3 3 3
3. **è§£é‡ŠåŸå› **ï¼šæ‰€æœ‰å›è°ƒå…±äº«åŒä¸€ä¸ªå˜é‡
4. **ç»™å‡ºè§£å†³æ–¹æ¡ˆ**ï¼šletã€é—­åŒ…ã€bindç­‰
5. **å¯¹æ¯”let**ï¼šletæ˜¯å—çº§ä½œç”¨åŸŸï¼Œæ¯æ¬¡å¾ªç¯åˆ›å»ºæ–°å˜é‡

### å¯èƒ½çš„è¿½é—®

**Q1: ä¸ºä»€ä¹ˆå¾ªç¯ä¸­varä¼šå‡ºé—®é¢˜ï¼Ÿ**

A: å› ä¸ºvaræ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Œå¾ªç¯ä¸­çš„var iåœ¨æ•´ä¸ªå‡½æ•°ä¸­åªæœ‰ä¸€ä¸ªï¼Œæ‰€æœ‰å¼‚æ­¥å›è°ƒéƒ½å¼•ç”¨åŒä¸€ä¸ªiã€‚å½“å›è°ƒæ‰§è¡Œæ—¶ï¼Œå¾ªç¯å·²ç»“æŸï¼Œiçš„å€¼æ˜¯3ã€‚

**Q2: å¦‚ä½•ç”¨é—­åŒ…è§£å†³ï¼Ÿ**

A: ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°åˆ›å»ºæ–°çš„ä½œç”¨åŸŸï¼Œæ•è·å½“å‰çš„iå€¼ï¼š

```javascript
for (var i = 0; i < 3; i++) {
  (function(j) {
    setTimeout(() => console.log(j), 0);
  })(i);
}
```

## ğŸ”— ç›¸å…³çŸ¥è¯†ç‚¹

- [var/let/conståŒºåˆ«](./var-let-const.md)
- [é—­åŒ…](./closure.md)
- [äº‹ä»¶å¾ªç¯](./event-loop.md)

## ğŸ“š å‚è€ƒèµ„æ–™

- [MDN - var](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/var)
- [MDN - å˜é‡æå‡](https://developer.mozilla.org/zh-CN/docs/Glossary/Hoisting)
